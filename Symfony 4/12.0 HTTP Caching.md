#### What is gateway cache?
#### What is the limitation of gateway cache?
they can only cache whole pages

#### Which HTTP status code must be returned if the cache is still valid ?
304

## Cache types (browser, proxies and reverse-proxies)
### Browser Caches
If you examine the preferences dialog of any modern Web browser, you’ll probably notice a “cache” setting. 
This lets you set aside a section of your computer’s hard disk to store representations that you’ve seen, just for you.
The browser cache works according to fairly simple rules. It will check to make sure that the representations are fresh, 
usually once a session (that is, the once in the current invocation of the browser).

This cache is especially useful when users hit the “back” button or click a link to see a page they’ve just looked at. 
Also, if you use the same navigation images throughout your site, they’ll be served from browsers’ caches almost instantaneously.

### Proxy Caches
Web proxy caches work on the same principle, but a much larger scale. 
Proxies serve hundreds or thousands of users in the same way; large corporations and ISPs often set them up on their firewalls, 
or as standalone devices (also known as intermediaries).

Because proxy caches aren’t part of the client or the origin server, but instead are out on the network, 
requests have to be routed to them somehow. One way to do this is to use your browser’s proxy setting to manually tell 
it what proxy to use; another is using interception. 
Interception proxies have Web requests redirected to them by the underlying network itself, 
so that clients don’t need to be configured for them, or even know about them.

Proxy caches are a type of shared cache; rather than just having one person using them, they usually have a large number of users, 
and because of this they are very good at reducing latency and network traffic. 
That’s because popular representations are reused a number of times.

### Gateway Caches
Also known as “reverse proxy caches” or “surrogate caches,” gateway caches are also intermediaries, 
but instead of being deployed by network administrators to save bandwidth, they’re typically deployed by Webmasters themselves, 
to make their sites more scalable, reliable and better performing.

Requests can be routed to gateway caches by a number of methods, but typically some form of load balancer is used to make 
one or more of them look like the origin server to clients.

Content delivery networks (CDNs) distribute gateway caches throughout the Internet (or a part of it) and sell caching to 
interested Web sites. Speedera and Akamai are examples of CDNs.

## Expiration (Expires, Cache-Control)
easiest way to cache a response is by caching it for a specific amount of time.
```php
// somehow create a Response object, like by rendering a template
    $response = $this->render('blog/index.html.twig', []);

    // cache for 3600 seconds
    $response->setSharedMaxAge(3600);

    // (optional) set a custom Cache-Control directive
    $response->headers->addCacheControlDirective('must-revalidate', true);

    return $response;
```
Above code will add following header in the HTTP response
```Cache-Control: public, s-maxage=3600, must-revalidate```
This tells your HTTP reverse proxy to cache this response for 3600 seconds. If anyone requests this URL again before 
3600 seconds, your application won't be hit at all. If you're using the Symfony reverse proxy, 
look at the `X-Symfony-Cache` header for debugging information about cache hits and misses.

#### Which HTTP headers belongs to expiration cache model?
1. Cache-Control
2. Expires

#### What’s the difference between `Expires` and `Cache-Control` headers?
`Cache-Control` was introduced in HTTP/1.1 and offers more options than `Expires`. 
They can be used to accomplish the same thing but the data value for `Expires` is an HTTP date whereas `Cache-Control` max-age
lets you specify a relative amount of time so you could specify "X hours after the page was requested".

`Expires` is recommended for static resources like images and `Cache-Control` when you need more control over how caching is done.

#### According to HTTP/1.1 what is the max value for Expires ?
one year

## Validation (ETag, Last-Modified)
##### What are HTTP headers used to implement validation model?
1. ETag
2. Last-Modified

##### can you use both validation and expiration within the same Response.?
Yes

##### Does using ETag saves CPU cycles.?
No

## Client side caching
## Server side caching
## Edge Side Includes
#### What is ESI?
Akamai wrote this specification almost 10 years ago and it allows specific parts of a page to have a different caching 
strategy than the main page.

The ESI specification describes tags you can embed in your pages to communicate with the gateway cache.
Only one tag is implemented in Symfony, `include`

### Example of ESI implementation
```html
<!DOCTYPE html>
<html>
    <body>
        <!-- ... some content -->

        <!-- Embed the content of another page here -->
        <esi:include src="http://..." />

        <!-- ... more content -->
    </body>
</html>
```

##### How to enable ESI in your application?
```yaml
# config/packages/framework.yaml
framework:
esi: {enable: true} 
```

#### What is the Twig function to render an ESI??
```twig
render_esi()
```

#### How to use ESI twig renderer?
```twig
{# you can use a controller reference #}
{{ render_esi(controller('App\\Controller\\NewsController::latest', { 'maxPerPage': 5 })) }}

{# ... or a URL #}
{{ render_esi(url('latest_news', { 'maxPerPage': 5 })) }}
```

#### Why ESI render helper instead of using the ESI tag?
That's because using a helper makes your application work even if there is no gateway cache installed.

https://www.mnot.net/cache_docs/
