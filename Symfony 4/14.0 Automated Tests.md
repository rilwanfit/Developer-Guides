## Automated Tests

### Unit tests with PHPUnit
https://symfony.com/doc/4.0/testing.html#unit-tests

### How to run test

#### Run all tests of the application
`./bin/phpunit`

#### Run all tests in the Util/ directory
`./bin/phpunit tests/Util`

#### Run tests for the Calculator class
`./bin/phpunit tests/Util/CalculatorTest.php`

### which method names are used to share test setup code?
`setUp()` and `tearDown()`

### How to disable constructor when mocking an object?
`$this->getMockBuilder('My\Class')->disableOriginalConstructor()->getMock()`
#### using Mockery

### Where `phpunit.xml.dist` located?
in the root of your Symfony application.


### Which Symfony class offers method to test commands?
https://symfony.com/doc/4.0/console.html#testing-commands

### Using PHPUnit, which method allows to specify a mock response on second call?
`$mock->expects($this->at(1)`

### Using PHPUnit, which method allows you to expect an exception to be thrown?
`$this->expectedException('MyException')`

### base component required to write functional test
`composer require --dev symfony/browser-kit`
`composer require --dev symfony/css-selector`

### functional tests location directory
`tests/Controller`

### functional tests namespace
`App\Tests\Controller`

### Example functional tests
```php
// tests/Controller/PostControllerTest.php
namespace App\Tests\Controller;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class PostControllerTest extends WebTestCase
{
    public function testShowPost()
    {
        $client = static::createClient();

        $crawler = $client->request('GET', '/post/hello-world');

        $this->assertEquals(200, $client->getResponse()->getStatusCode());
    }
}
```

### Base class for functional tests
`WebTestCase`
```php
abstract class WebTestCase extends KernelTestCase
{
    /**
     * Creates a Client.
     *
     * @param array $options An array of options to pass to the createKernel method
     * @param array $server  An array of server parameters
     *
     * @return Client A Client instance
     */
    protected static function createClient(array $options = [], array $server = [])
    {
```

### $options supports
environment and debug


### Client object
### Crawler object

### What is Crawler?
A Crawler instance is returned each time you make a request with the Client. It allows you to traverse HTML documents, select nodes, find links and forms.

### Where the crawler located?
`Symfony\Component\DomCrawler`

### how to apply css selector in crawler
```$crawler->filter('html:contains("Hello World")')```
it will return Nodes that match the CSS selector.

### how to apply XPath expression in crawler
```$crawler->filterXpath('h1')```
it will return Nodes that match the XPath expression.

### How to return a node by index
`$crawler->filter('html:contains("Hello World")')->eq(1)`

### How to return first node
`$crawler->filter('html:contains("Hello World")')->first()`

### How to return last node
`$crawler->filter('html:contains("Hello World")')->last()`

### How to return siblings nodes
`$crawler->filter('html:contains("Hello World")')->siblings()`

### How to return all following siblings nodes
`$crawler->filter('html:contains("Hello World")')->nextAll()`

### How to return all preceding siblings nodes
`$crawler->filter('html:contains("Hello World")')->previousAll()`

### How to return all parent nodes
`$crawler->filter('html:contains("Hello World")')->parents()`

### How to return all children nodes
`$crawler->filter('html:contains("Hello World")')->children()`

> Each of these methods returns a new `Crawler` instance

### get the number of nodes stored in a Crawler
`$crawler->filter('ul.tags > li')->count()`

### Profile object
### Framework objects access
### Client configuration
### Request and response objects introspection
### PHPUnit bridge
### Handling legacy deprecated code